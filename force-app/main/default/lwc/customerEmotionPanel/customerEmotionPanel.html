<template>
	<lightning-card title="Sentiment Analysis" icon-name="custom:custom97">
		<lightning-conversation-toolkit-api lwc:ref="lwcToolKitApi"></lightning-conversation-toolkit-api>
		<template lwc:if={showCalculateButton}>
			<lightning-button slot="actions" variant="brand" label="Calculate Emotion" onclick={handleManualCalculate} disabled={_analyzing}></lightning-button>
		</template>
		<template lwc:if={loaded}>
			<div class="slds-p-around_small" aria-live="polite">
				<span class={badgeClass} title={emotion}>
					<lightning-icon icon-name={iconName} variant="inverse" size="x-small" alternative-text={displayEmotion} class="slds-m-right_x-small"></lightning-icon>
					<span class="slds-truncate">{displayEmotion}</span>
				</span>
				<template lwc:if={hasResult}>
					<template if:true={reason}>
						<p class="slds-m-top_small slds-text-body_small">{reason}</p>
					</template>
				</template>
				<template lwc:elseif={error}>
					<p class="slds-text-color_error slds-text-body_small">{error}</p>
				</template>
				<template lwc:else>
					<p class="slds-text-color_weak slds-text-body_small">No sentiment available.</p>
				</template>
			</div>
		</template>
		<template lwc:else>
			<div class="slds-is-relative slds-p-around_medium">
				<lightning-spinner size="small" alternative-text="Analyzing"></lightning-spinner>
			</div>
		</template>
	</lightning-card>
</template>